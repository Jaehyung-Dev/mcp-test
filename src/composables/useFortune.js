import { ref, computed } from 'vue'

export function useFortune(tabs) {
  const currentTab = ref('today')
  const fortuneData = ref({
    today: { 
      numbers: [], 
      score: 0,
      hasGenerated: false,
      categories: {
        love: { score: 0, message: '', details: '' },
        study: { score: 0, message: '', details: '' },
        work: { score: 0, message: '', details: '' },
        health: { score: 0, message: '', details: '' }
      }
    },
    week: { 
      numbers: [], 
      score: 0,
      hasGenerated: false,
      categories: {
        love: { score: 0, message: '', details: '' },
        study: { score: 0, message: '', details: '' },
        work: { score: 0, message: '', details: '' },
        health: { score: 0, message: '', details: '' }
      }
    },
    month: { 
      numbers: [], 
      score: 0,
      hasGenerated: false,
      categories: {
        love: { score: 0, message: '', details: '' },
        study: { score: 0, message: '', details: '' },
        work: { score: 0, message: '', details: '' },
        health: { score: 0, message: '', details: '' }
      }
    },
    year: { 
      numbers: [], 
      score: 0,
      hasGenerated: false,
      categories: {
        love: { score: 0, message: '', details: '' },
        study: { score: 0, message: '', details: '' },
        work: { score: 0, message: '', details: '' },
        health: { score: 0, message: '', details: '' }
      }
    }
  })
  const isAnimating = ref(false)

  const getTabTitle = computed(() => {
    const tab = tabs.find(t => t.id === currentTab.value)
    return tab ? tab.label : ''
  })

  const luckyNumbers = computed(() => fortuneData.value[currentTab.value].numbers)
  const luckScore = computed(() => fortuneData.value[currentTab.value].score)
  const categoryScores = computed(() => fortuneData.value[currentTab.value].categories)
  const hasGenerated = computed(() => fortuneData.value[currentTab.value].hasGenerated)

  const generateNumbers = async () => {
    if (fortuneData.value[currentTab.value].hasGenerated) return
    
    isAnimating.value = true
    let maxNumber = 1000
    
    switch(currentTab.value) {
      case 'week':
        maxNumber = 2000
        break
      case 'month':
        maxNumber = 3000
        break
      case 'year':
        maxNumber = 5000
        break
    }
    
    // ê° ì¹´í…Œê³ ë¦¬ë³„ë¡œ ë…ë¦½ì ì¸ ìš´ì„¸ ìƒì„±
    const generateCategoryScore = () => {
      // 1ë¶€í„° 100ê¹Œì§€ì˜ ê· ë“±í•œ í™•ë¥ ë¡œ ì ìˆ˜ ìƒì„±
      return Math.floor(Math.random() * 100) + 1
    }

    // ê° ì¹´í…Œê³ ë¦¬ë³„ ë…ë¦½ì ì¸ ì ìˆ˜ ìƒì„±
    const categories = {
      love: generateCategoryScore(),
      study: generateCategoryScore(),
      work: generateCategoryScore(),
      health: generateCategoryScore()
    }

    // í–‰ìš´ì˜ ìˆ«ìëŠ” 3ê°œë§Œ ìƒì„± (í‘œì‹œìš©)
    const numbers = []
    while (numbers.length < 3) {
      const num = Math.floor(Math.random() * maxNumber) + 1
      if (!numbers.includes(num)) {
        numbers.push(num)
      }
    }
    const sortedNumbers = numbers.sort((a, b) => a - b)

    // ê° ì¹´í…Œê³ ë¦¬ë³„ ë©”ì‹œì§€ ì„¤ì •
    const categoryMessages = {
      love: {
        90: 'ì‚¬ë‘ìš´ì´ ë§¤ìš° ì¢‹ìŠµë‹ˆë‹¤! ìƒˆë¡œìš´ ì¸ì—°ì´ ì°¾ì•„ì˜¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤ ğŸ’•',
        80: 'ì—°ì• ìš´ì´ ì¢‹ìŠµë‹ˆë‹¤. í˜„ì¬ ê´€ê³„ê°€ ë” ë°œì „í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤ ğŸ’‘',
        70: 'ê´œì°®ì€ ì—°ì• ìš´ì…ë‹ˆë‹¤. ë§ˆìŒì„ ì—´ì–´ë³´ì„¸ìš” ğŸ’˜',
        60: 'í‰ë²”í•œ ì—°ì• ìš´ì…ë‹ˆë‹¤. ì¡°ê¸ˆ ë” ì ê·¹ì ìœ¼ë¡œ ë‚˜ê°€ë³´ì„¸ìš” ğŸ’',
        50: 'ì—°ì• ìš´ì´ ë³´í†µì…ë‹ˆë‹¤. í˜„ì¬ ìƒíƒœë¥¼ ìœ ì§€í•˜ì„¸ìš” ğŸ’—',
        40: 'ì—°ì• ìš´ì´ ì¡°ê¸ˆ ë‚®ìŠµë‹ˆë‹¤. ì‹ ì¤‘í•˜ê²Œ í–‰ë™í•˜ì„¸ìš” ğŸ’”',
        30: 'ì—°ì• ìš´ì´ ë‚®ìŠµë‹ˆë‹¤. ìƒˆë¡œìš´ ê´€ê³„ëŠ” ì¡°ê¸ˆ ë” ê¸°ë‹¤ë ¤ë³´ì„¸ìš” ğŸ’”',
        20: 'ì—°ì• ìš´ì´ ë§¤ìš° ë‚®ìŠµë‹ˆë‹¤. í˜¼ìë§Œì˜ ì‹œê°„ì„ ê°€ì ¸ë³´ì„¸ìš” ğŸ’”',
        0: 'ì—°ì• ìš´ì´ ìµœì•…ì…ë‹ˆë‹¤. ì ì‹œ ì—°ì• ëŠ” ë¯¸ë¤„ë‘ì„¸ìš” ğŸ’”'
      },
      study: {
        90: 'í•™ì—…ìš´ì´ ë§¤ìš° ì¢‹ìŠµë‹ˆë‹¤! ì‹œí—˜ê³¼ ê³¼ì œì—ì„œ ì¢‹ì€ ê²°ê³¼ë¥¼ ì–»ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤ ğŸ“š',
        80: 'í•™ì—…ìš´ì´ ì¢‹ìŠµë‹ˆë‹¤. ì§‘ì¤‘ë ¥ì´ ë†’ì•„ì§€ëŠ” ì‹œê¸°ì…ë‹ˆë‹¤ âœï¸',
        70: 'ê´œì°®ì€ í•™ì—…ìš´ì…ë‹ˆë‹¤. ë…¸ë ¥í•˜ë©´ ì¢‹ì€ ê²°ê³¼ê°€ ìˆì„ ê²ƒì…ë‹ˆë‹¤ ğŸ“',
        60: 'í‰ë²”í•œ í•™ì—…ìš´ì…ë‹ˆë‹¤. ê¾¸ì¤€í•œ ë…¸ë ¥ì´ í•„ìš”í•©ë‹ˆë‹¤ ğŸ“–',
        50: 'í•™ì—…ìš´ì´ ë³´í†µì…ë‹ˆë‹¤. í˜„ì¬ í˜ì´ìŠ¤ë¥¼ ìœ ì§€í•˜ì„¸ìš” ğŸ“”',
        40: 'í•™ì—…ìš´ì´ ì¡°ê¸ˆ ë‚®ìŠµë‹ˆë‹¤. ë” ë§ì€ ë…¸ë ¥ì´ í•„ìš”í•©ë‹ˆë‹¤ ğŸ“•',
        30: 'í•™ì—…ìš´ì´ ë‚®ìŠµë‹ˆë‹¤. ì§‘ì¤‘ì´ ì˜ ì•ˆë  ìˆ˜ ìˆìŠµë‹ˆë‹¤ ğŸ“˜',
        20: 'í•™ì—…ìš´ì´ ë§¤ìš° ë‚®ìŠµë‹ˆë‹¤. ì‰¬ëŠ” ì‹œê°„ì„ ì¶©ë¶„íˆ ê°€ì§€ì„¸ìš” ğŸ“™',
        0: 'í•™ì—…ìš´ì´ ìµœì•…ì…ë‹ˆë‹¤. ì ì‹œ íœ´ì‹ì„ ì·¨í•˜ì„¸ìš” ğŸ“š'
      },
      work: {
        90: 'ì§ì¥ìš´ì´ ë§¤ìš° ì¢‹ìŠµë‹ˆë‹¤! ìŠ¹ì§„ì´ë‚˜ ì¢‹ì€ ê¸°íšŒê°€ ì°¾ì•„ì˜¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤ ğŸ’¼',
        80: 'ì§ì¥ìš´ì´ ì¢‹ìŠµë‹ˆë‹¤. í”„ë¡œì íŠ¸ê°€ ìˆœì¡°ë¡­ê²Œ ì§„í–‰ë  ê²ƒì…ë‹ˆë‹¤ ğŸ“ˆ',
        70: 'ê´œì°®ì€ ì§ì¥ìš´ì…ë‹ˆë‹¤. ë…¸ë ¥í•œ ë§Œí¼ì˜ ê²°ê³¼ê°€ ìˆì„ ê²ƒì…ë‹ˆë‹¤ ğŸ“Š',
        60: 'í‰ë²”í•œ ì§ì¥ìš´ì…ë‹ˆë‹¤. ê¾¸ì¤€í•œ ë…¸ë ¥ì´ í•„ìš”í•©ë‹ˆë‹¤ ğŸ“‘',
        50: 'ì§ì¥ìš´ì´ ë³´í†µì…ë‹ˆë‹¤. í˜„ì¬ í˜ì´ìŠ¤ë¥¼ ìœ ì§€í•˜ì„¸ìš” ğŸ“‹',
        40: 'ì§ì¥ìš´ì´ ì¡°ê¸ˆ ë‚®ìŠµë‹ˆë‹¤. ë” ë§ì€ ë…¸ë ¥ì´ í•„ìš”í•©ë‹ˆë‹¤ ğŸ“‰',
        30: 'ì§ì¥ìš´ì´ ë‚®ìŠµë‹ˆë‹¤. ì‹¤ìˆ˜í•˜ì§€ ì•Šë„ë¡ ì£¼ì˜í•˜ì„¸ìš” ğŸ“‰',
        20: 'ì§ì¥ìš´ì´ ë§¤ìš° ë‚®ìŠµë‹ˆë‹¤. ì¡°ì‹¬ìŠ¤ëŸ½ê²Œ í–‰ë™í•˜ì„¸ìš” ğŸ“‰',
        0: 'ì§ì¥ìš´ì´ ìµœì•…ì…ë‹ˆë‹¤. ì ì‹œ íœ´ì‹ì„ ì·¨í•˜ì„¸ìš” ğŸ’¼'
      },
      health: {
        90: 'ê±´ê°•ìš´ì´ ë§¤ìš° ì¢‹ìŠµë‹ˆë‹¤! í™œë ¥ì´ ë„˜ì¹˜ëŠ” ì‹œê¸°ì…ë‹ˆë‹¤ ğŸ’ª',
        80: 'ê±´ê°•ìš´ì´ ì¢‹ìŠµë‹ˆë‹¤. ìš´ë™ì´ë‚˜ ìƒˆë¡œìš´ ì·¨ë¯¸ë¥¼ ì‹œì‘í•˜ê¸° ì¢‹ì€ ì‹œê¸°ì…ë‹ˆë‹¤ ğŸƒâ€â™‚ï¸',
        70: 'ê´œì°®ì€ ê±´ê°•ìš´ì…ë‹ˆë‹¤. í‰ì†Œë³´ë‹¤ ë” í™œê¸°ì°¬ í•˜ë£¨ê°€ ë  ê²ƒì…ë‹ˆë‹¤ ğŸ‹ï¸â€â™‚ï¸',
        60: 'í‰ë²”í•œ ê±´ê°•ìš´ì…ë‹ˆë‹¤. ê·œì¹™ì ì¸ ìƒí™œì„ ìœ ì§€í•˜ì„¸ìš” ğŸ§˜â€â™‚ï¸',
        50: 'ê±´ê°•ìš´ì´ ë³´í†µì…ë‹ˆë‹¤. í˜„ì¬ ìƒíƒœë¥¼ ìœ ì§€í•˜ì„¸ìš” ğŸš¶â€â™‚ï¸',
        40: 'ê±´ê°•ìš´ì´ ì¡°ê¸ˆ ë‚®ìŠµë‹ˆë‹¤. ì¶©ë¶„í•œ íœ´ì‹ì´ í•„ìš”í•©ë‹ˆë‹¤ ğŸ˜´',
        30: 'ê±´ê°•ìš´ì´ ë‚®ìŠµë‹ˆë‹¤. ë¬´ë¦¬í•˜ì§€ ì•Šë„ë¡ ì£¼ì˜í•˜ì„¸ìš” ğŸ¤’',
        20: 'ê±´ê°•ìš´ì´ ë§¤ìš° ë‚®ìŠµë‹ˆë‹¤. ì¶©ë¶„í•œ íœ´ì‹ì„ ì·¨ì„¸ìš” ğŸ¤•',
        0: 'ê±´ê°•ìš´ì´ ìµœì•…ì…ë‹ˆë‹¤. ë³‘ì›ì„ ë°©ë¬¸í•˜ëŠ” ê²ƒì´ ì¢‹ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤ ğŸ¥'
      }
    }

    // ê° ì¹´í…Œê³ ë¦¬ë³„ ìƒì„¸ ì„¤ëª…
    const categoryDetails = {
      love: {
        90: 'ìƒˆë¡œìš´ ë§Œë‚¨ì´ ìˆì„ ê°€ëŠ¥ì„±ì´ ë†’ìŠµë‹ˆë‹¤. ë§ˆìŒì„ ì—´ê³  ê¸°ë‹¤ë ¤ë³´ì„¸ìš”.',
        80: 'í˜„ì¬ ê´€ê³„ê°€ ë” ë°œì „í•  ìˆ˜ ìˆëŠ” ì‹œê¸°ì…ë‹ˆë‹¤. ì†”ì§í•œ ëŒ€í™”ë¥¼ ë‚˜ëˆ ë³´ì„¸ìš”.',
        70: 'ì‘ì€ ê¸°íšŒê°€ ì°¾ì•„ì˜¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì£¼ë³€ì„ ë‘˜ëŸ¬ë³´ì„¸ìš”.',
        60: 'ì¡°ê¸ˆ ë” ì ê·¹ì ì¸ íƒœë„ê°€ í•„ìš”í•©ë‹ˆë‹¤. ìš©ê¸°ë¥¼ ë‚´ë³´ì„¸ìš”.',
        50: 'í˜„ì¬ ìƒíƒœë¥¼ ìœ ì§€í•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤. ì„œë‘ë¥´ì§€ ë§ˆì„¸ìš”.',
        40: 'ì‹ ì¤‘í•œ íŒë‹¨ì´ í•„ìš”í•œ ì‹œê¸°ì…ë‹ˆë‹¤. ì„œë‘ë¥´ì§€ ë§ˆì„¸ìš”.',
        30: 'ìƒˆë¡œìš´ ê´€ê³„ëŠ” ì ì‹œ ë¯¸ë¤„ë‘ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤.',
        20: 'í˜¼ìë§Œì˜ ì‹œê°„ì„ ê°€ì§€ë©° ë§ˆìŒì„ ì •ë¦¬í•´ë³´ì„¸ìš”.',
        0: 'ì—°ì• ëŠ” ì ì‹œ ë¯¸ë¤„ë‘ê³  ìì‹ ì—ê²Œ ì§‘ì¤‘í•˜ì„¸ìš”.'
      },
      study: {
        90: 'ì§‘ì¤‘ë ¥ì´ ë§¤ìš° ë†’ì€ ì‹œê¸°ì…ë‹ˆë‹¤. ì¤‘ìš”í•œ ì‹œí—˜ì„ ì¹˜ë¥´ê¸°ì— ì¢‹ìŠµë‹ˆë‹¤.',
        80: 'í•™ìŠµ ëŠ¥ë ¥ì´ ì¢‹ì€ ì‹œê¸°ì…ë‹ˆë‹¤. ìƒˆë¡œìš´ ê²ƒì„ ë°°ìš°ê¸°ì— ì í•©í•©ë‹ˆë‹¤.',
        70: 'ê¾¸ì¤€í•œ ë…¸ë ¥ì´ ì¢‹ì€ ê²°ê³¼ë¥¼ ê°€ì ¸ì˜¬ ê²ƒì…ë‹ˆë‹¤.',
        60: 'ì¡°ê¸ˆ ë” ì§‘ì¤‘ì´ í•„ìš”í•©ë‹ˆë‹¤. ê³„íšì„ ì„¸ì›Œë³´ì„¸ìš”.',
        50: 'í˜„ì¬ í˜ì´ìŠ¤ë¥¼ ìœ ì§€í•˜ë©° ê¾¸ì¤€íˆ ê³µë¶€í•˜ì„¸ìš”.',
        40: 'ë” ë§ì€ ë…¸ë ¥ì´ í•„ìš”í•©ë‹ˆë‹¤. ì‹œê°„ì„ ì˜ ê´€ë¦¬í•˜ì„¸ìš”.',
        30: 'ì§‘ì¤‘ì´ ì˜ ì•ˆë  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì‰¬ëŠ” ì‹œê°„ì„ ì¶©ë¶„íˆ ê°€ì§€ì„¸ìš”.',
        20: 'í•™ìŠµ ëŠ¥ë ¥ì´ ë–¨ì–´ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤. íœ´ì‹ì„ ì·¨í•˜ì„¸ìš”.',
        0: 'ì ì‹œ íœ´ì‹ì„ ì·¨í•˜ë©° ë§ˆìŒì„ ì •ë¦¬í•´ë³´ì„¸ìš”.'
      },
      work: {
        90: 'ìƒˆë¡œìš´ ê¸°íšŒê°€ ì°¾ì•„ì˜¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì ê·¹ì ìœ¼ë¡œ ë„ì „í•´ë³´ì„¸ìš”.',
        80: 'í”„ë¡œì íŠ¸ê°€ ìˆœì¡°ë¡­ê²Œ ì§„í–‰ë  ê²ƒì…ë‹ˆë‹¤. ìì‹ ê°ì„ ê°€ì§€ì„¸ìš”.',
        70: 'ë…¸ë ¥í•œ ë§Œí¼ì˜ ê²°ê³¼ê°€ ìˆì„ ê²ƒì…ë‹ˆë‹¤. ê¾¸ì¤€íˆ í•˜ì„¸ìš”.',
        60: 'ì¡°ê¸ˆ ë” ì§‘ì¤‘ì´ í•„ìš”í•©ë‹ˆë‹¤. ê³„íšì„ ì„¸ì›Œë³´ì„¸ìš”.',
        50: 'í˜„ì¬ í˜ì´ìŠ¤ë¥¼ ìœ ì§€í•˜ë©° ê¾¸ì¤€íˆ í•˜ì„¸ìš”.',
        40: 'ë” ë§ì€ ë…¸ë ¥ì´ í•„ìš”í•©ë‹ˆë‹¤. ì‹œê°„ì„ ì˜ ê´€ë¦¬í•˜ì„¸ìš”.',
        30: 'ì‹¤ìˆ˜í•˜ì§€ ì•Šë„ë¡ ì£¼ì˜ê°€ í•„ìš”í•©ë‹ˆë‹¤.',
        20: 'ì¡°ì‹¬ìŠ¤ëŸ½ê²Œ í–‰ë™í•˜ì„¸ìš”. ì¤‘ìš”í•œ ê²°ì •ì€ ë¯¸ë£¨ì„¸ìš”.',
        0: 'ì ì‹œ íœ´ì‹ì„ ì·¨í•˜ë©° ë§ˆìŒì„ ì •ë¦¬í•´ë³´ì„¸ìš”.'
      },
      health: {
        90: 'í™œë ¥ì´ ë„˜ì¹˜ëŠ” ì‹œê¸°ì…ë‹ˆë‹¤. ìƒˆë¡œìš´ ìš´ë™ì„ ì‹œì‘í•´ë³´ì„¸ìš”.',
        80: 'ê±´ê°• ìƒíƒœê°€ ë§¤ìš° ì¢‹ìŠµë‹ˆë‹¤. ê·œì¹™ì ì¸ ìš´ë™ì„ ì‹œì‘í•˜ì„¸ìš”.',
        70: 'í‰ì†Œë³´ë‹¤ ë” í™œê¸°ì°¬ í•˜ë£¨ê°€ ë  ê²ƒì…ë‹ˆë‹¤.',
        60: 'ê·œì¹™ì ì¸ ìƒí™œì„ ìœ ì§€í•˜ì„¸ìš”. ì¶©ë¶„í•œ ìˆ˜ë©´ì„ ì·¨í•˜ì„¸ìš”.',
        50: 'í˜„ì¬ ìƒíƒœë¥¼ ìœ ì§€í•˜ì„¸ìš”. ë¬´ë¦¬í•˜ì§€ ë§ˆì„¸ìš”.',
        40: 'ì¶©ë¶„í•œ íœ´ì‹ì´ í•„ìš”í•©ë‹ˆë‹¤. ìŠ¤íŠ¸ë ˆìŠ¤ë¥¼ ì¤„ì´ì„¸ìš”.',
        30: 'ë¬´ë¦¬í•˜ì§€ ì•Šë„ë¡ ì£¼ì˜í•˜ì„¸ìš”. íœ´ì‹ì„ ì·¨í•˜ì„¸ìš”.',
        20: 'ì¶©ë¶„í•œ íœ´ì‹ì„ ì·¨í•˜ì„¸ìš”. ë³‘ì›ì„ ë°©ë¬¸í•˜ëŠ” ê²ƒì„ ê³ ë ¤í•´ë³´ì„¸ìš”.',
        0: 'ê±´ê°•ì— ì£¼ì˜ê°€ í•„ìš”í•©ë‹ˆë‹¤. ë³‘ì›ì„ ë°©ë¬¸í•˜ì„¸ìš”.'
      }
    }

    // ê° ì¹´í…Œê³ ë¦¬ë³„ ì ìˆ˜ì™€ ë©”ì‹œì§€ ì„¤ì •
    const updatedCategories = {}
    for (const [category, score] of Object.entries(categories)) {
      const messages = categoryMessages[category]
      const details = categoryDetails[category]
      let message = ''
      let detail = ''

      if (score >= 90) { message = messages[90]; detail = details[90] }
      else if (score >= 80) { message = messages[80]; detail = details[80] }
      else if (score >= 70) { message = messages[70]; detail = details[70] }
      else if (score >= 60) { message = messages[60]; detail = details[60] }
      else if (score >= 50) { message = messages[50]; detail = details[50] }
      else if (score >= 40) { message = messages[40]; detail = details[40] }
      else if (score >= 30) { message = messages[30]; detail = details[30] }
      else if (score >= 20) { message = messages[20]; detail = details[20] }
      else { message = messages[0]; detail = details[0] }

      updatedCategories[category] = {
        score,
        message,
        details: detail
      }
    }

    // í˜„ì¬ íƒ­ì˜ ìš´ì„¸ ë°ì´í„° ì—…ë°ì´íŠ¸
    fortuneData.value[currentTab.value] = {
      ...fortuneData.value[currentTab.value],
      numbers: sortedNumbers,
      hasGenerated: true,
      categories: updatedCategories
    }
    
    await new Promise(resolve => setTimeout(resolve, 1000))
    isAnimating.value = false
  }

  const getLuckMessage = computed(() => {
    if (!fortuneData.value[currentTab.value].hasGenerated) {
      return ''
    }

    const messages = {
      today: {
        90: 'ëŒ€ë°•! ì˜¤ëŠ˜ì€ ì „ì„¤ì ì¸ í–‰ìš´ì˜ ë‚ ì…ë‹ˆë‹¤! ğŸŒŸ',
        80: 'ë†€ë¼ìš´ í–‰ìš´ì´ ë‹¹ì‹ ì„ ê¸°ë‹¤ë¦½ë‹ˆë‹¤! âœ¨',
        70: 'ë§¤ìš° ì¢‹ì€ í•˜ë£¨ê°€ ë  ê²ƒ ê°™ë„¤ìš”! ğŸŒˆ',
        60: 'ì¢‹ì€ ì¼ì´ ìƒê¸¸ ê²ƒ ê°™ìŠµë‹ˆë‹¤! ğŸ€',
        50: 'í‰ë²”í•œ í•˜ë£¨ê°€ ë  ê²ƒ ê°™ìŠµë‹ˆë‹¤. ğŸ˜Š',
        40: 'ì¡°ê¸ˆ ì¡°ì‹¬ìŠ¤ëŸ¬ìš´ í•˜ë£¨ë„¤ìš”. âš¡',
        30: 'ì£¼ì˜ê°€ í•„ìš”í•œ í•˜ë£¨ì…ë‹ˆë‹¤. ğŸŒ§ï¸',
        20: 'ì‹¤ìˆ˜í•˜ì§€ ì•Šë„ë¡ ì£¼ì˜í•˜ì„¸ìš”! âš ï¸',
        0: 'ì˜¤ëŠ˜ì€ ì‹ ì¤‘í•˜ê²Œ í–‰ë™í•˜ì„¸ìš”! ğŸ’«'
      },
      week: {
        90: 'ì´ë²ˆ ì£¼ëŠ” ì „ì„¤ì ì¸ í–‰ìš´ì´ ë‹¹ì‹ ì„ ì°¾ì•„ì˜µë‹ˆë‹¤! ğŸŒŸ',
        80: 'ì´ë²ˆ ì£¼ëŠ” ë†€ë¼ìš´ ê¸°íšŒê°€ ì°¾ì•„ì˜¬ ê²ƒì…ë‹ˆë‹¤! âœ¨',
        70: 'ì´ë²ˆ ì£¼ëŠ” ë§¤ìš° ì¢‹ì€ ì¼ë“¤ì´ ë§ì„ ê²ƒ ê°™ë„¤ìš”! ğŸŒˆ',
        60: 'ì´ë²ˆ ì£¼ëŠ” ì‘ì€ í–‰ìš´ì´ ê³„ì†ë  ê²ƒì…ë‹ˆë‹¤! ğŸ€',
        50: 'ì´ë²ˆ ì£¼ëŠ” í‰ì†Œì™€ ê°™ì€ ì¼ìƒì´ ì´ì–´ì§ˆ ê²ƒì…ë‹ˆë‹¤. ğŸ˜Š',
        40: 'ì´ë²ˆ ì£¼ëŠ” ì¡°ê¸ˆ ì¡°ì‹¬ìŠ¤ëŸ½ê²Œ ë³´ë‚´ì•¼ í•  ê²ƒ ê°™ë„¤ìš”. âš¡',
        30: 'ì´ë²ˆ ì£¼ëŠ” ì£¼ì˜ê°€ í•„ìš”í•œ ì¼ë“¤ì´ ë§ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ğŸŒ§ï¸',
        20: 'ì´ë²ˆ ì£¼ëŠ” ì‹¤ìˆ˜í•˜ì§€ ì•Šë„ë¡ ì£¼ì˜ê°€ í•„ìš”í•©ë‹ˆë‹¤. âš ï¸',
        0: 'ì´ë²ˆ ì£¼ëŠ” ì‹ ì¤‘í•˜ê²Œ í–‰ë™í•˜ëŠ” ê²ƒì´ ì¢‹ì„ ê²ƒ ê°™ìŠµë‹ˆë‹¤. ğŸ’«'
      },
      month: {
        90: 'ì´ë²ˆ ë‹¬ì€ ì „ì„¤ì ì¸ í–‰ìš´ì´ ë‹¹ì‹ ì„ ì°¾ì•„ì˜µë‹ˆë‹¤! ğŸŒŸ',
        80: 'ì´ë²ˆ ë‹¬ì€ ë†€ë¼ìš´ ê¸°íšŒê°€ ì°¾ì•„ì˜¬ ê²ƒì…ë‹ˆë‹¤! âœ¨',
        70: 'ì´ë²ˆ ë‹¬ì€ ë§¤ìš° ì¢‹ì€ ì¼ë“¤ì´ ë§ì„ ê²ƒ ê°™ë„¤ìš”! ğŸŒˆ',
        60: 'ì´ë²ˆ ë‹¬ì€ ì‘ì€ í–‰ìš´ì´ ê³„ì†ë  ê²ƒì…ë‹ˆë‹¤! ï¿½ï¿½',
        50: 'ì´ë²ˆ ë‹¬ì€ í‰ì†Œì™€ ê°™ì€ ì¼ìƒì´ ì´ì–´ì§ˆ ê²ƒì…ë‹ˆë‹¤. ğŸ˜Š',
        40: 'ì´ë²ˆ ë‹¬ì€ ì¡°ê¸ˆ ì¡°ì‹¬ìŠ¤ëŸ½ê²Œ ë³´ë‚´ì•¼ í•  ê²ƒ ê°™ë„¤ìš”. âš¡',
        30: 'ì´ë²ˆ ë‹¬ì€ ì£¼ì˜ê°€ í•„ìš”í•œ ì¼ë“¤ì´ ë§ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ğŸŒ§ï¸',
        20: 'ì´ë²ˆ ë‹¬ì€ ì‹¤ìˆ˜í•˜ì§€ ì•Šë„ë¡ ì£¼ì˜ê°€ í•„ìš”í•©ë‹ˆë‹¤. âš ï¸',
        0: 'ì´ë²ˆ ë‹¬ì€ ì‹ ì¤‘í•˜ê²Œ í–‰ë™í•˜ëŠ” ê²ƒì´ ì¢‹ì„ ê²ƒ ê°™ìŠµë‹ˆë‹¤. ğŸ’«'
      },
      year: {
        90: 'ì˜¬í•´ëŠ” ì „ì„¤ì ì¸ í–‰ìš´ì´ ë‹¹ì‹ ì„ ì°¾ì•„ì˜µë‹ˆë‹¤! ğŸŒŸ',
        80: 'ì˜¬í•´ëŠ” ë†€ë¼ìš´ ê¸°íšŒê°€ ì°¾ì•„ì˜¬ ê²ƒì…ë‹ˆë‹¤! âœ¨',
        70: 'ì˜¬í•´ëŠ” ë§¤ìš° ì¢‹ì€ ì¼ë“¤ì´ ë§ì„ ê²ƒ ê°™ë„¤ìš”! ğŸŒˆ',
        60: 'ì˜¬í•´ëŠ” ì‘ì€ í–‰ìš´ì´ ê³„ì†ë  ê²ƒì…ë‹ˆë‹¤! ğŸ€',
        50: 'ì˜¬í•´ëŠ” í‰ì†Œì™€ ê°™ì€ ì¼ìƒì´ ì´ì–´ì§ˆ ê²ƒì…ë‹ˆë‹¤. ğŸ˜Š',
        40: 'ì˜¬í•´ëŠ” ì¡°ê¸ˆ ì¡°ì‹¬ìŠ¤ëŸ½ê²Œ ë³´ë‚´ì•¼ í•  ê²ƒ ê°™ë„¤ìš”. âš¡',
        30: 'ì˜¬í•´ëŠ” ì£¼ì˜ê°€ í•„ìš”í•œ ì¼ë“¤ì´ ë§ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ğŸŒ§ï¸',
        20: 'ì˜¬í•´ëŠ” ì‹¤ìˆ˜í•˜ì§€ ì•Šë„ë¡ ì£¼ì˜ê°€ í•„ìš”í•©ë‹ˆë‹¤. âš ï¸',
        0: 'ì˜¬í•´ëŠ” ì‹ ì¤‘í•˜ê²Œ í–‰ë™í•˜ëŠ” ê²ƒì´ ì¢‹ì„ ê²ƒ ê°™ìŠµë‹ˆë‹¤. ğŸ’«'
      }
    }

    const tabMessages = messages[currentTab.value]
    if (luckScore.value >= 90) return tabMessages[90]
    if (luckScore.value >= 80) return tabMessages[80]
    if (luckScore.value >= 70) return tabMessages[70]
    if (luckScore.value >= 60) return tabMessages[60]
    if (luckScore.value >= 50) return tabMessages[50]
    if (luckScore.value >= 40) return tabMessages[40]
    if (luckScore.value >= 30) return tabMessages[30]
    if (luckScore.value >= 20) return tabMessages[20]
    return tabMessages[0]
  })

  const getLuckDetails = computed(() => {
    if (!fortuneData.value[currentTab.value].hasGenerated) {
      return ''
    }

    const details = {
      today: {
        90: 'ìƒˆë¡œìš´ ê¸°íšŒê°€ ì°¾ì•„ì˜¬ ê°€ëŠ¥ì„±ì´ ë§¤ìš° ë†’ìŠµë‹ˆë‹¤. ìš©ê¸°ìˆê²Œ ë„ì „í•´ë³´ì„¸ìš”!',
        80: 'ì˜¤ëŠ˜ì€ ì¤‘ìš”í•œ ê²°ì •ì„ ë‚´ë¦¬ê¸°ì— ì¢‹ì€ ë‚ ì…ë‹ˆë‹¤.',
        70: 'ì˜ˆìƒì¹˜ ëª»í•œ ì¢‹ì€ ì†Œì‹ì´ ìˆì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.',
        60: 'ì‘ì€ í–‰ìš´ì´ ë‹¹ì‹ ì„ ì°¾ì•„ì˜¬ ê²ƒì…ë‹ˆë‹¤.',
        50: 'í‰ì†Œì™€ ê°™ì€ ì¼ìƒì´ ì´ì–´ì§ˆ ê²ƒì…ë‹ˆë‹¤.',
        40: 'ê³„íšì„ ì„¸ë°€í•˜ê²Œ ì„¸ìš°ê³  í–‰ë™í•˜ì„¸ìš”.',
        30: 'ì¤‘ìš”í•œ ê²°ì •ì€ ë¯¸ë£¨ëŠ” ê²ƒì´ ì¢‹ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.',
        20: 'ì‹¤ìˆ˜í•  ê°€ëŠ¥ì„±ì´ ë†’ìœ¼ë‹ˆ ì£¼ì˜ê°€ í•„ìš”í•©ë‹ˆë‹¤.',
        0: 'ì˜¤ëŠ˜ì€ íœ´ì‹ì„ ì·¨í•˜ëŠ” ê²ƒì´ ì¢‹ì„ ê²ƒ ê°™ìŠµë‹ˆë‹¤.'
      },
      week: {
        90: 'ì´ë²ˆ ì£¼ëŠ” ìƒˆë¡œìš´ ë„ì „ê³¼ ê¸°íšŒê°€ ë§ì´ ì°¾ì•„ì˜¬ ê²ƒì…ë‹ˆë‹¤. ì ê·¹ì ìœ¼ë¡œ ë„ì „í•´ë³´ì„¸ìš”!',
        80: 'ì´ë²ˆ ì£¼ëŠ” ì¤‘ìš”í•œ ê²°ì •ì„ ë‚´ë¦¬ê¸°ì— ì¢‹ì€ ì‹œê¸°ì…ë‹ˆë‹¤.',
        70: 'ì´ë²ˆ ì£¼ëŠ” ì˜ˆìƒì¹˜ ëª»í•œ ì¢‹ì€ ì†Œì‹ì´ ìˆì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.',
        60: 'ì´ë²ˆ ì£¼ëŠ” ì‘ì€ í–‰ìš´ì´ ê³„ì†ë  ê²ƒì…ë‹ˆë‹¤.',
        50: 'ì´ë²ˆ ì£¼ëŠ” í‰ì†Œì™€ ê°™ì€ ì¼ìƒì´ ì´ì–´ì§ˆ ê²ƒì…ë‹ˆë‹¤.',
        40: 'ì´ë²ˆ ì£¼ëŠ” ê³„íšì„ ì„¸ë°€í•˜ê²Œ ì„¸ìš°ê³  í–‰ë™í•˜ì„¸ìš”.',
        30: 'ì´ë²ˆ ì£¼ëŠ” ì¤‘ìš”í•œ ê²°ì •ì€ ë¯¸ë£¨ëŠ” ê²ƒì´ ì¢‹ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.',
        20: 'ì´ë²ˆ ì£¼ëŠ” ì‹¤ìˆ˜í•  ê°€ëŠ¥ì„±ì´ ë†’ìœ¼ë‹ˆ ì£¼ì˜ê°€ í•„ìš”í•©ë‹ˆë‹¤.',
        0: 'ì´ë²ˆ ì£¼ëŠ” íœ´ì‹ì„ ì·¨í•˜ëŠ” ê²ƒì´ ì¢‹ì„ ê²ƒ ê°™ìŠµë‹ˆë‹¤.'
      },
      month: {
        90: 'ì´ë²ˆ ë‹¬ì€ ìƒˆë¡œìš´ ë„ì „ê³¼ ê¸°íšŒê°€ ë§ì´ ì°¾ì•„ì˜¬ ê²ƒì…ë‹ˆë‹¤. ì ê·¹ì ìœ¼ë¡œ ë„ì „í•´ë³´ì„¸ìš”!',
        80: 'ì´ë²ˆ ë‹¬ì€ ì¤‘ìš”í•œ ê²°ì •ì„ ë‚´ë¦¬ê¸°ì— ì¢‹ì€ ì‹œê¸°ì…ë‹ˆë‹¤.',
        70: 'ì´ë²ˆ ë‹¬ì€ ì˜ˆìƒì¹˜ ëª»í•œ ì¢‹ì€ ì†Œì‹ì´ ìˆì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.',
        60: 'ì´ë²ˆ ë‹¬ì€ ì‘ì€ í–‰ìš´ì´ ê³„ì†ë  ê²ƒì…ë‹ˆë‹¤.',
        50: 'ì´ë²ˆ ë‹¬ì€ í‰ì†Œì™€ ê°™ì€ ì¼ìƒì´ ì´ì–´ì§ˆ ê²ƒì…ë‹ˆë‹¤.',
        40: 'ì´ë²ˆ ë‹¬ì€ ê³„íšì„ ì„¸ë°€í•˜ê²Œ ì„¸ìš°ê³  í–‰ë™í•˜ì„¸ìš”.',
        30: 'ì´ë²ˆ ë‹¬ì€ ì¤‘ìš”í•œ ê²°ì •ì€ ë¯¸ë£¨ëŠ” ê²ƒì´ ì¢‹ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.',
        20: 'ì´ë²ˆ ë‹¬ì€ ì‹¤ìˆ˜í•  ê°€ëŠ¥ì„±ì´ ë†’ìœ¼ë‹ˆ ì£¼ì˜ê°€ í•„ìš”í•©ë‹ˆë‹¤.',
        0: 'ì´ë²ˆ ë‹¬ì€ íœ´ì‹ì„ ì·¨í•˜ëŠ” ê²ƒì´ ì¢‹ì„ ê²ƒ ê°™ìŠµë‹ˆë‹¤.'
      },
      year: {
        90: 'ì˜¬í•´ëŠ” ìƒˆë¡œìš´ ë„ì „ê³¼ ê¸°íšŒê°€ ë§ì´ ì°¾ì•„ì˜¬ ê²ƒì…ë‹ˆë‹¤. ì ê·¹ì ìœ¼ë¡œ ë„ì „í•´ë³´ì„¸ìš”!',
        80: 'ì˜¬í•´ëŠ” ì¤‘ìš”í•œ ê²°ì •ì„ ë‚´ë¦¬ê¸°ì— ì¢‹ì€ ì‹œê¸°ì…ë‹ˆë‹¤.',
        70: 'ì˜¬í•´ëŠ” ì˜ˆìƒì¹˜ ëª»í•œ ì¢‹ì€ ì†Œì‹ì´ ìˆì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.',
        60: 'ì˜¬í•´ëŠ” ì‘ì€ í–‰ìš´ì´ ê³„ì†ë  ê²ƒì…ë‹ˆë‹¤.',
        50: 'ì˜¬í•´ëŠ” í‰ì†Œì™€ ê°™ì€ ì¼ìƒì´ ì´ì–´ì§ˆ ê²ƒì…ë‹ˆë‹¤.',
        40: 'ì˜¬í•´ëŠ” ê³„íšì„ ì„¸ë°€í•˜ê²Œ ì„¸ìš°ê³  í–‰ë™í•˜ì„¸ìš”.',
        30: 'ì˜¬í•´ëŠ” ì¤‘ìš”í•œ ê²°ì •ì€ ë¯¸ë£¨ëŠ” ê²ƒì´ ì¢‹ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.',
        20: 'ì˜¬í•´ëŠ” ì‹¤ìˆ˜í•  ê°€ëŠ¥ì„±ì´ ë†’ìœ¼ë‹ˆ ì£¼ì˜ê°€ í•„ìš”í•©ë‹ˆë‹¤.',
        0: 'ì˜¬í•´ëŠ” íœ´ì‹ì„ ì·¨í•˜ëŠ” ê²ƒì´ ì¢‹ì„ ê²ƒ ê°™ìŠµë‹ˆë‹¤.'
      }
    }

    const tabDetails = details[currentTab.value]
    if (luckScore.value >= 90) return tabDetails[90]
    if (luckScore.value >= 80) return tabDetails[80]
    if (luckScore.value >= 70) return tabDetails[70]
    if (luckScore.value >= 60) return tabDetails[60]
    if (luckScore.value >= 50) return tabDetails[50]
    if (luckScore.value >= 40) return tabDetails[40]
    if (luckScore.value >= 30) return tabDetails[30]
    if (luckScore.value >= 20) return tabDetails[20]
    return tabDetails[0]
  })

  return {
    currentTab,
    fortuneData,
    isAnimating,
    hasGenerated,
    getTabTitle,
    luckyNumbers,
    categoryScores,
    getLuckMessage,
    getLuckDetails,
    generateNumbers
  }
} 